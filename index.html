<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Xenia Services API</title>
</head>
<body>
<script>
(async function() {
  function getServiceKey() {
    const urlParams = new URLSearchParams(window.location.search);
    let key = urlParams.get('services');
    if (key) return key;
    const pathMatch = window.location.pathname.match(/\/services\/([^\/]+)/);
    if (pathMatch) return pathMatch[1];
    return null;
  }
  const key = getServiceKey();
  if (!key) {
    document.write(JSON.stringify({ error: "No service specified" }));
    return;
  }
  const resp = await fetch('urls.json');
  const services = await resp.json();
  let value = services.hasOwnProperty(key) ? services[key] : services["default"];
  let output = {};
  output[key] = value;
  document.open();
  document.write(JSON.stringify(output));
  document.close();
})();
</script>
</body>
</html>
